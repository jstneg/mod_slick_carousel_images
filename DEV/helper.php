<?php/** * Helper class * @author j.s. Negley */jimport('joomla.filesystem.file');class modSlickCarouselImages{    public static function test($params) {        return 'Hello World!';    }	public static function getImages(&$params, $folder)	{		$images	    = array();		$subfolders = $params->get( 'subfolders', 0 );		$repeat     = $params->get( 'repeat', 0 );		$target     = $params->get( 'target', '_self' );		if($params->get('links')!=''){			$links = explode( ',', $params->get('links') );		}else{			$links = '';		}		if($params->get( 'alttags' )!=''){			$alttags = explode( ',', $params->get( 'alttags' ) );		}else{			$alttags = '';		}		if (is_dir(JPATH_BASE.'/'.$folder))		{			$files = modSlickCarouselImages::getFiles($folder,$subfolders);			$i = 0;			$repeated = 0;			foreach ($files as $file){				if (modSlickCarouselImages::isImage($file)) {					$file = str_replace( '\\', '/', $file );					if(isset($alttags[$i])){						$images[$i] = JHTML::image($file, $alttags[$i], ["class" => "img-responsive"]);					}else{						$images[$i] = JHTML::image($file, '', ["class" => "img-responsive"]);					}							if ($links && (isset($links[$i]) or $repeat)) :						if (isset($links[$i])) {							$images[$i] = JHTML::link($links[$i], $images[$i], ($target ? array('target' => '_blank') : '' ) );						} else {							$repeated++;							$images[$i] = JHTML::link($links[$repeated-1], $images[$i], ($target ? array('target' => '_blank') : '' ) );							if ($repeated == count($links)) $repeated = 0 ;						}					endif;					++$i;				}			}		}		return $images;	}	public static function getFolder(&$params){		$folder 	= 'images/'.$params->get( 'imgfolder' );		$livesite 	= JURI::base();		// if folder includes livesite info, remove		if ( JString::strpos($folder, $livesite) === 0 ) {			$folder = str_replace( $livesite, '', $folder );		}		// if folder includes absolute path, remove		if ( JString::strpos($folder, JPATH_SITE) === 0 ) {			$folder= str_replace( JPATH_BASE, '', $folder );		}		$folder = str_replace('\\','/',$folder);		return $folder;	}	public static function getFiles($folder,$subfolders) {		$dir      = JPATH_BASE.'/'.$folder;		$files	  = array();		$subfiles = array();		if ($handle = opendir($dir)) {			while (false !== ($file = readdir($handle))) {				if ($file != '.' && $file != '..' && $file != 'CVS' && $file != 'index.html' ) {					if (!is_dir($dir.'/'.$file)){						$files[] = $folder.'/'.$file;					} elseif ($subfolders != 0) {						$newfolder = $folder.'/'.$file;						$subfiles  = modSlickCarouselImages::getFiles($newfolder,$subfolders);					}				}			}		}		closedir($handle);		$files = array_merge($files,$subfiles);		sort($files);		return $files;	}    public static function isImage($file) {		$file  = JFile::getName($file);		$file  = JFile::getExt($file);		$file  = strtolower($file);        $types = array("jpg", "jpeg", "gif", "png");        if (in_array($file, $types)){        	return true;        }else{        	return false;        }    }}?>